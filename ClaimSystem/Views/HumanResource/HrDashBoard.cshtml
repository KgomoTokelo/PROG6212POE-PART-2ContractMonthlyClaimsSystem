@model IEnumerable<ClaimSystem.Models.Claims>

@{
    ViewBag.Title = "HR Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

    // Claim statistics
    var totalClaims = Model?.Count() ?? 0;
    var verifiedClaims = Model?.Count(c => c.Status == ClaimSystem.Models.Claims.status.Verefied) ?? 0;
    var pendingClaims = Model?.Count(c => c.Status == ClaimSystem.Models.Claims.status.Submitted) ?? 0;
    var approvedClaims = Model?.Count(c => c.Status == ClaimSystem.Models.Claims.status.Approved) ?? 0;
    var rejectedClaims = Model?.Count(c => c.Status == ClaimSystem.Models.Claims.status.Rejected || c.Status == ClaimSystem.Models.Claims.status.Decline) ?? 0;
    var totalAmount = Model?.Sum(c => c.HoursWorked * (double)c.HourlyRate) ?? 0;
}

<h2 class="mb-4">📊 HR Dashboard - Claims Overview & Employee Management</h2>

@if (ViewBag.ErrorMessage != null)
{
    <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
}

<!-- Claims Overview Cards -->
<div class="d-flex flex-wrap gap-4 mt-3">
    <div class="flex-fill p-4 rounded shadow-sm bg-light">
        <h5>Total Claims</h5>
        <p class="fs-3 fw-bold text-primary">@totalClaims</p>
    </div>
    <div class="flex-fill p-4 rounded shadow-sm" style="background-color: #d1e7dd;">
        <h5>Verified Claims</h5>
        <p class="fs-3 fw-bold text-success">@verifiedClaims</p>
    </div>
    <div class="flex-fill p-4 rounded shadow-sm" style="background-color: #fff3cd;">
        <h5>Pending Claims</h5>
        <p class="fs-3 fw-bold text-warning">@pendingClaims</p>
    </div>
    <div class="flex-fill p-4 rounded shadow-sm" style="background-color: #cfe2ff;">
        <h5>Approved Claims</h5>
        <p class="fs-3 fw-bold text-primary">@approvedClaims</p>
    </div>
    <div class="flex-fill p-4 rounded shadow-sm" style="background-color: #f8d7da;">
        <h5>Total Amount Claimed</h5>
        <p class="fs-3 fw-bold text-danger">R @totalAmount.ToString("N2")</p>
    </div>
</div>

<!-- Quick HR Actions -->
<div class="mt-5">
    <h3>⚙️ HR Quick Actions</h3>
    <div class="d-flex gap-3 mt-3">
        <a asp-controller="Login" asp-action="AddEmployee" class="btn btn-success">
            <i class="bi bi-person-plus"></i> Add New Employee
        </a>
        <a asp-controller="Login" asp-action="EmployeeList" class="btn btn-info text-white">
            <i class="bi bi-people"></i> View All Employees
        </a>
        <a asp-controller="Login" asp-action="HrExportCsv" class="btn btn-primary">
            <i class="bi bi-file-earmark-spreadsheet"></i> Export CSV
        </a>
    </div>
</div>

<!-- Styles -->
<style>
    body {
        background: linear-gradient(135deg, #e0f7fa 0%, #ffe0b2 100%);
        min-height: 100vh;
    }

    .card, .flex-fill {
        transition: transform 0.2s, box-shadow 0.2s;
    }

        .card:hover, .flex-fill:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
